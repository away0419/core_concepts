# Domain Event 설계

Domain Event는 “도메인 내에서 의미 있는 일이 발생했음을 알리는 메시지”다. 상태 변경을 다른 컨텍스트나 리스너에게 전달하는 데 사용한다.

---

## 1. 특징
- 과거 시제(“…되었다”)로 명명 (`OrderPlaced`, `PaymentFailed`).
- 이벤트 자체가 불변이며, 필요한 정보만 포함.
- 발행 시점과 처리 시점을 분리해 결합도를 낮춘다.

---

## 2. 발행 흐름
1. Aggregate에서 상태 변경 → 이벤트 객체 생성.
2. Application Layer가 이벤트를 Event Bus/Outbox로 전달.
3. 리스너가 이벤트를 구독해 후속 작업 수행(알림, 통계, 외부 연동).

Outbox 패턴을 사용하면 DB 트랜잭션과 이벤트 발행을 일관성 있게 유지할 수 있다.

---

## 3. 체크리스트
- [ ] 이벤트 명명 규칙(과거 시제)을 지켰는가?
- [ ] 이벤트가 필요한 정보만 담고 있는가? (민감 정보 최소화)
- [ ] 이벤트 발행/구독이 재시도·DLQ 등 안정성을 갖추었는가?
- [ ] Outbox/Inbox 등 일관성 패턴을 적용했는가?

---

## 4. 실습 아이디어
- **실습 1**: 주문 애그리게이트에서 `OrderPlacedEvent`를 발행하고, 알림 서비스를 리스너로 구현.
- **실습 2**: Outbox 테이블을 두고 CDC로 이벤트를 브로커에 전달.
- **실습 3**: 동일 이벤트를 여러 컨텍스트에서 서로 다른 방식으로 처리하도록 설계.

