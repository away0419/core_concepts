# OAuth2 · JWT 등 인증/인가 방식 비교

API 보안을 위해 인증(Authentication)과 인가(Authorization)를 올바르게 설계해야 한다.

---

## 1. OAuth 2.0
- 권한 위임 프로토콜. 클라이언트가 리소스 소유자 대신 API에 접근.
- 그랜트 유형: Authorization Code, Client Credentials, Resource Owner Password, Device Code.
- Access Token + Refresh Token 구조, 만료/갱신 전략 필요.

## 2. JWT (JSON Web Token)
- 자체 포함 토큰. 서명된 페이로드로 인증 상태를 전달.
- 장점: 서버 상태 저장 필요 없음.
- 단점: 만료 전까지 철회 어렵고, 큰 페이로드는 전송 비용 증가.

## 3. 세션 기반 인증
- 서버가 세션 ID를 저장, 쿠키로 커뮤니케이션.
- 상태를 서버가 관리하므로 정교한 제어 가능.

## 4. 인가 모델
- RBAC(Role-Based), ABAC(Attribute-Based), 정책 엔진(Opa, Casbin).

---

## 5. 체크리스트
- [ ] 토큰 저장 위치(쿠키, 로컬 스토리지)와 보안 설정(SameSite, HttpOnly)을 정의했는가?
- [ ] 만료/갱신/철회 전략(Refresh Token, 블랙리스트) 마련?
- [ ] 권한 모델(RBAC/ABAC)과 정책 변경 프로세스를 문서화?
- [ ] 감사 로그와 접근 이력(Who/When/What)을 저장?

---

## 6. 실습 아이디어
- **실습 1**: OAuth2 Authorization Code Flow를 구현하고 토큰 갱신까지 테스트.
- **실습 2**: JWT 서명/검증, 만료 처리, 키 롤오버를 구현.
- **실습 3**: 정책 엔진으로 RBAC/ABAC 규칙을 작성하고 API Gateway에 적용.

