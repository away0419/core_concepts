# 관계형 DB vs NoSQL 선택·운영 전략

서비스 요구사항에 따라 RDB 혹은 다양한 NoSQL을 선택해야 한다. 이 문서는 선택 기준과 마이그레이션/백업/일관성 전략을 정리한다.

---

## 1. 비교 표

| 항목 | RDBMS | NoSQL (Key-Value, Document, Column, Graph 등) |
| --- | --- | --- |
| 스키마 | 고정 스키마, SQL | 스키마 유연, API 다양 |
| 트랜잭션 | ACID, 복잡한 조인 지원 | 대부분 Eventually Consistent, 단순 쿼리 |
| 확장성 | 수직 확장 중심, 샤딩 필요 | 수평 확장에 유리 |
| 사용 예 | 금융, 주문, ERP | 캐시, 세션, 로그, 분석, 그래프 관계 |

---

## 2. 선택 기준
- **일관성 vs 확장성**: 강한 일관성이 필요하면 RDB, 대규모 읽기/쓰기와 스키마 유연성이 필요하면 NoSQL.
- **쿼리 복잡도**: 조인이 많고 SQL이 필요한 경우 RDB가 적합.
- **지연/처리량 요구**: 밀리초 이하 응답, 대량 스트리밍은 NoSQL.

---

## 3. 마이그레이션 전략
1. 스키마 설계: NoSQL은 접근 패턴에 맞춰 데이터를 중복 저장.
2. 데이터 이관: CDC(Change Data Capture)를 사용해 서비스 중단 없이 이관.
3. 이중 쓰기: 일정 기간 RDB와 NoSQL에 동시에 쓰고 결과를 비교.
4. 롤백 계획: 문제가 생기면 즉시 이전 구조로 돌아갈 수 있도록 준비.

---

## 4. 백업 · 복구 · 일관성
- 스냅샷 + Write Ahead Log를 조합해 특정 시점으로 복구(Point-in-time Recovery).
- 다중 리전 복제, Cross-region backup.
- NoSQL도 백업/복구, TTL, 컴팩션 등의 운영 작업을 자동화해야 한다.

---

## 5. 체크리스트
- [ ] 요구되는 일관성/지연/스토리지 비용을 수치화했는가?
- [ ] NoSQL 스키마를 접근 패턴 기반으로 설계했는가?
- [ ] 이중 쓰기/데이터 검증 계획을 세웠는가?
- [ ] 백업/복구 시나리오를 문서화하고 주기적으로 테스트하는가?

---

## 6. 실습 아이디어
- **실습 1**: 동일 데이터를 RDB와 Document DB에 저장하고 특정 쿼리 성능을 비교.
- **실습 2**: Debezium 등 CDC 도구를 사용해 실시간으로 데이터를 NoSQL에 복제.
- **실습 3**: Key-Value, Column, Graph DB 각각으로 간단한 문제를 해결해 보고 특성을 체감.

