# 트랜잭션 격리 수준 (Isolation Level)

동시에 실행되는 트랜잭션이 서로의 데이터를 어떻게 볼 수 있을지 결정하는 설정이다. 각 수준의 특징과 부작용을 이해해야 올바른 값을 선택할 수 있다.

---

## 1. 문제 유형
- **Dirty Read**: 커밋되지 않은 데이터를 읽음.
- **Non-repeatable Read**: 같은 쿼리를 두 번 실행했을 때 결과가 다름.
- **Phantom Read**: 범위 조건을 만족하는 행 수가 중간에 변함.

---

## 2. 격리 수준 비교

| 수준 | Dirty Read | Non-repeatable | Phantom | 비고 |
| --- | --- | --- | --- | --- |
| Read Uncommitted | 발생 | 발생 | 발생 | 거의 사용하지 않음 |
| Read Committed | 방지 | 발생 | 발생 | 기본값(MSSQL, Oracle) |
| Repeatable Read | 방지 | 방지 | 발생 | 기본값(MySQL InnoDB) |
| Serializable | 방지 | 방지 | 방지 | 완전 격리, 성능 비용 큼 |

---

## 3. 선택 가이드
- **대부분의 웹 서비스**: Read Committed 또는 Repeatable Read로 충분.
- **금융/트랜잭션 핵심**: Serializable이 필요할 수 있으나, SAGA/락을 조합해 우회하기도 한다.
- 격리 수준을 올릴수록 락 경합이 심해지고 throughput이 떨어진다.

---

## 4. 체크리스트
- [ ] 기본 격리 수준을 문서화했고, 트랜잭션별로 조정이 필요한지 평가했는가?
- [ ] Phantom/Non-repeatable Read가 실제로 문제가 되는지 재현 테스트를 했는가?
- [ ] 높은 격리 수준으로 인한 락 경합/데드락을 모니터링하고 있는가?

---

## 5. 실습 아이디어
- **실습 1**: 두 세션에서 동일한 데이터를 읽고 수정하며 각 격리 수준에서 어떤 현상이 일어나는지 직접 확인.
- **실습 2**: Serializable 수준으로 올렸을 때 throughput이 얼마나 줄어드는지 부하 테스트.
- **실습 3**: 특정 트랜잭션만 격리 수준을 높이는 방법(SET TRANSACTION)을 적용해 본다.

