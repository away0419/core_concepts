# 모놀리식·MSA·이벤트 기반·CQRS·Gateway·Service Mesh 비교

아키텍처를 바꾸는 결정은 서비스 규모와 팀 조직에 큰 영향을 준다. 각 패턴을 개념→장단점→사용 시점 순으로 이해해 보자.

---

## 1. 패턴별 한 장 요약

| 패턴 | 장점 | 한계/주의 | 적합한 경우 |
| --- | --- | --- | --- |
| 모놀리식 | 단일 배포, 트랜잭션 단순, 디버깅 쉬움 | 규모 커지면 배포/확장/팀 협업이 어려움 | 초기 서비스, 작은 팀, 빠른 MVP |
| MSA | 서비스별 독립 배포/확장, 팀 자율성 | 분산 트랜잭션, 운영 복잡, 공통 인프라 필요 | 대규모 조직, 도메인 팀 구조 |
| 이벤트 기반 | 결합도↓, 확장성↑, 감사 로그/이력 확보 | 최종 일관성, 재처리/스키마 관리 필요 | 비동기 처리, 마이크로서비스간 통합 |
| CQRS | 읽기/쓰기 부하 분리, 성능↑ | 모델 복잡, 데이터 동기화 필요 | 읽기 비율 높고 보고서/검색 많음 |
| API Gateway | 인증/라우팅 집중, 계약 고정, 멀티 클라이언트 대응 | 단일 장애 지점 위험 → 이중화 필요 | 외부 API 노출, 멀티 클라이언트 앱 |
| Service Mesh | 통신/보안/관찰성 일관화, mTLS·Traffic 제어 | 리소스 오버헤드, 운영 복잡, 학습 비용 | MSA 규모가 커지고 보안/관찰성이 중요할 때 |

---

## 2. 선택 시 고려 질문
1. **조직 구조**: 도메인 팀이 독립적으로 일할 수 있는가? ( → MSA)
2. **데이터 일관성 요구**: 강한 일관성이 필요한가, 최종 일관성으로도 충분한가? (→ 이벤트 기반, CQRS)
3. **배포/운영 역량**: CI/CD, 모니터링, IaC가 준비되어 있는가? (없다면 모놀리식 유지가 안전)
4. **보안·관찰성**: mTLS, 세밀한 트래픽 제어가 필요한가? (→ Service Mesh)
5. **레거시와 공존**: 기존 모놀리식을 어떻게 단계적으로 분리할 것인가? (스트랭글러 패턴)

---

## 3. 도입 로드맵 예시
1. **현황 진단**: 배포 리드타임, 장애 원인, 트래픽 패턴 데이터를 수집.
2. **목표 정의**: 왜 바꾸는지, 어떤 품질 속성을 개선하려는지 명확히 한다.
3. **파일럿 선정**: 리스크가 낮고 효과가 명확한 도메인부터 패턴을 적용.
4. **플랫폼/도구 준비**: API Gateway, Service Mesh, Observability, CI/CD, IaC를 표준화.
5. **회고 & 확장**: 적용 후 SLO·배포 속도 등 지표를 측정하고, 학습 내용을 팀에 공유.

---

## 4. 학습/실습 아이디어
- **실습 1**: 현재 시스템을 C4 다이어그램으로 그린 뒤, 모놀리식→MSA 변환 시 어떤 서비스로 분리할지 정해본다.
- **실습 2**: 이벤트 기반 아키텍처를 시뮬레이션하기 위해 간단한 주문/재고 서비스를 이벤트 브로커로 연결해 본다.
- **실습 3**: Service Mesh(예: Istio, Linkerd)를 로컬 클러스터에 설치해 트래픽 제어·mTLS·관찰성 기능을 체험한다.

---

## 5. 체크리스트
- [ ] 도메인 팀 조직 구조와 서비스 경계를 맞추었는가?
- [ ] 데이터 일관성 요구사항과 트랜잭션 경계를 패턴에 맞게 설계했는가?
- [ ] 배포/운영/모니터링 자동화 도구를 확보했는가?
- [ ] 관찰성·보안·회복탄력성 정책을 패턴에 맞춰 재설계했는가?
- [ ] 레거시 모놀리식과 공존/이행 전략(스트랭글러 패턴 등)을 마련했는가?

